{% extends 'base.html' %}

{% block title %}
    {{ article.title }}
{% end %}

{% block content %}
<div id='article-detials' class="entry-box">
    <div class="article-entry-header">
        <h3 class="article-entry-title">
            <a href="{{ reverse_url('article', article.id) }}">{{ article.title }}</a>
        </h3>
    </div>
    <div class="article-entry-info">
        <div class="base-info">
            <span class="label label-default"> {{ article.create_time.strftime("%Y年%m月%d日") }} </span>&nbsp;
            <span class="label label-warning">
            <a href="{{ reverse_url('articleSource', article.source.id) }}" target="_blank" style="color: white">
                {{ article.source.name }}
            </a>
        </span>&nbsp;
            <span class="label label-info">
            <a href="{{ reverse_url('articleType', article.articleType.id) }}" target="_blank" style="color: white">
                {{ article.articleType.name }}
            </a>
        </span>&nbsp;
        </div>
        <div class="main-info">
            <span class="label label-primary">浏览 {{ article.num_of_view }}</span>
            <span class="label label-success">评论 {{ comments_pager.totalCount }}</span>
        </div>
    </div>

    <hr>
    <div>
        <img class="article-loading" src="{{ static_url('images/loading154.gif') }}">
        <p class="article-content" style="display: none">
            {% raw article.content %}
        </p>
    </div>
    <br><br>
    <div class="article-add-info">
        <p>
            <span class="glyphicon glyphicon-time">
                博文最后更新时间：
            </span>
            {{ article.create_time.strftime("%Y年%m月%d日 %H:%M:%S") }}
        </p>
    </div>
    {% if current_user %}
    <div class="article-edit">
        <a href="{{ reverse_url('admin.article', article.id) }}">
            <button type="button" class="btn btn-default btn-sm">
                <span class="glyphicon glyphicon-pencil"></span>
                编辑
            </button>
        </a>
    </div>
    {% end %}
    <hr>

    <h4 id="comments"><span class="glyphicon glyphicon-comment">评论</span></h4>
{#
    {% include "_article_comments.html" %}
    <div class="pagination">
        {{ macros.pagination_widget(pagination, endpoint, id=id, fragment='#comments') }}
    </div>
    <h4  id="submit-comment"><span class="glyphicon glyphicon-comment">发表评论</span></h4>
    {% include "_submit_comment.html" %}
#}
</div>
{% end %}

{% block script %}
    <script src="//cdn.bootcss.com/markdown.js/0.5.0/markdown.min.js"></script>
    <script src="{{ static_url('js/articleDetail.js') }}"></script>
{% end %}
